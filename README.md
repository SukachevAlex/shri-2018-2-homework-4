# Домашнее задание #4

## Запуск

Установить зависимости `npm install`

Запустить проект `npm run start`

## Ссылка на проект heroku

Хочу задеплоить сервер на heroku (** реализую в ближайшее время **)

[Ссылка]()

## Основные задачи

* Сервер на express, который поднимается на 8000 порту.
* Обрабатывает роут /status - выдает время, прошедшее с запуска сервера в формате hh:mm:ss.
* Роут /api/events - отдает содержимое файла events.json.
* При передаче параметра type включается фильтрация по типам события.
* При некорректном type - отдается статус 400 "incorrect type".
* Все остальные роуты отдают `<h1>Page not found</h1>`.

## Дополнительные задачи

* Перейти на POST-параметры (** реализую в ближайшее время **)
* Сделать пагинацию событий (** реализую в ближайшее время **)
* Подключить данные к верстке из первого задания (** реализую в ближайшее время **)

## Основные моменты
* Использую nodemon для автоматического перезапуска сервера при изменениях.
* Разбил архитектуру приложения: 
  * /data - файлы с данными (events.json);
  * /helpers - вспомогательные функции (data.js - для работы со временем);
  * /routes - роуты приложения.
* Решил в /api/events сделать выдачу файла для get-параметров с помощью потоков, а для post - рекваирить json файл и отправлять с помощью res.json(file).
* Вместо кириллицы выдавало значки, решил добавить ``res.header("Content-Type", "text/cache-manifest");``.
* Думаю, что нерационально использую потоки, т.к. при чтении фильтрую и добавляю chunk'и в буфер, а потом только отдаю на страницу.